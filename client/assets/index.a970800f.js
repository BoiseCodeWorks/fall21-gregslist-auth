var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,n=(e,n)=>{for(var r in n||(n={}))a.call(n,r)&&s(e,r,n[r]);if(t)for(var r of t(n))o.call(n,r)&&s(e,r,n[r]);return e};import{r,c,o as l,a as i,b as u,d,S as p,C as m,p as g,e as b,f as h,w as f,g as v,v as y,h as _,i as w,j as A,k,l as C,m as x,n as E,q as P,s as S,t as T,u as O,M as j,x as I,y as L,z as B}from"./vendor.1a86e924.js";const R=r({user:{},account:{},cars:[],car:null,bids:[]});const V={name:"App",setup:()=>({appState:c((()=>R))})},q={class:"container-fluid"},U={class:"row"},D={class:"col-md-10 viewport"};V.render=function(e,t,a,o,s,n){const r=d("Sidebar"),c=d("router-view");return l(),i("main",q,[u("div",U,[u(r,{class:"col-md-2"}),u("div",D,[u(c)])])])};class H{static async confirm(e="Are you sure?",t="You won't be able to revert this!",a="warning",o="Yes, delete it!"){try{return!!(await p.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:o})).isConfirmed}catch(s){return!1}}static toast(e="Warning!",t="warning",a="top-end",o=3e3,s=!0){p.fire({title:e,icon:t,position:a,timer:o,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const $=window.location.origin.includes("localhost"),M=$?"http://localhost:3000":"";function z(e,t){if($)console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t)}}const N={log(){z("log",arguments)},error(){z("error",arguments)},warn(){z("warn",arguments)},assert(){z("assert",arguments)},trace(){z("trace",arguments)}},Y=m.create({baseURL:M,timeout:8e3});const J=new class{async getAccount(){try{const e=await Y.get("/account");R.account=e.data}catch(e){N.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}};const W={props:{account:{type:Object,default:()=>({})}},setup(e){const t=h({});return f((()=>{t.value=n({},e.account)})),{editable:t,async handleSubmit(){try{t.value.id&&await J.update(t.value)}catch(e){H.toast(e.message,"error")}}}}},K=w("data-v-3da6afe6");g("data-v-3da6afe6");const F={class:"form-group"},G=u("div",{class:"button-group"},[u("button",{type:"submit",class:"btn text-primary"},[u("b",null," Save ")])],-1);b();const Q=K(((e,t,a,o,s,n)=>(l(),i("form",{class:"account-form",onSubmit:t[2]||(t[2]=_(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[u("div",F,[v(u("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>o.editable.name=e)},null,512),[[y,o.editable.name]])]),G],32))));W.render=Q,W.__scopeId="data-v-3da6afe6";var Z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:W});let X;const ee={},te=function(e,t){if(!t||0===t.length)return e();if(void 0===X){const e=document.createElement("link").relList;X=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in ee)return;ee[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":X,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))};function ae(e){return()=>function(e){switch(e){case"./pages/AboutPage.vue":return te((()=>import("./AboutPage.f0c1db4c.js")),["/assets/AboutPage.f0c1db4c.js","/assets/vendor.1a86e924.js"]);case"./pages/AccountListingsPage.vue":return te((()=>import("./AccountListingsPage.e4b2b9e9.js")),["/assets/AccountListingsPage.e4b2b9e9.js","/assets/vendor.1a86e924.js"]);case"./pages/AccountPage.vue":return te((()=>import("./AccountPage.245e0c44.js")),["/assets/AccountPage.245e0c44.js","/assets/AccountPage.7181737d.css","/assets/vendor.1a86e924.js"]);case"./pages/AccountSettingsPage.vue":return te((()=>import("./AccountSettingsPage.30df3291.js")),["/assets/AccountSettingsPage.30df3291.js","/assets/vendor.1a86e924.js"]);case"./pages/CarPage.vue":return te((()=>import("./CarPage.0661d3ce.js")),["/assets/CarPage.0661d3ce.js","/assets/vendor.1a86e924.js"]);case"./pages/CarsPage.vue":return te((()=>import("./CarsPage.4748894b.js")),["/assets/CarsPage.4748894b.js","/assets/CarsPage.bda030b0.css","/assets/vendor.1a86e924.js"]);case"./pages/HomePage.vue":return te((()=>import("./HomePage.a9091e1a.js")),["/assets/HomePage.a9091e1a.js","/assets/HomePage.67dd37ad.css","/assets/vendor.1a86e924.js"]);case"./pages/HousesPage.vue":return te((()=>import("./HousesPage.40bfb9ff.js")),["/assets/HousesPage.40bfb9ff.js","/assets/CarsPage.bda030b0.css","/assets/vendor.1a86e924.js"]);case"./pages/JobsPage.vue":return te((()=>import("./JobsPage.33bb4f37.js")),["/assets/JobsPage.33bb4f37.js","/assets/CarsPage.bda030b0.css","/assets/vendor.1a86e924.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`./pages/${e}.vue`)}const oe=[{path:"/",name:"Home",component:ae("HomePage")},{path:"/about",name:"About",component:ae("AboutPage"),beforeEnter:C},{path:"/cars",name:"Cars",component:ae("CarsPage")},{path:"/cars/:carId",name:"Car",component:ae("CarPage")},{path:"/houses",name:"Houses",component:ae("HousesPage")},{path:"/jobs",name:"Jobs",component:ae("JobsPage")},{path:"/account/:accountId",name:"Account",component:ae("AccountPage"),beforeEnter:x,children:[{path:"settings",name:"Account.Settings",component:ae("AccountSettingsPage")},{path:"listings",name:"Account.Listings",component:ae("AccountListingsPage")}]}],se=A({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:k(),routes:oe}),ne="connected",re="authenticate",ce="authenticated",le="error";const ie=new class extends class{constructor(e=!1,t=M){this.socket=E(t||M),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on(ne,this.onConnected).on(ce,this.onAuthenticated).on(le,this.onError)}on(e,t){return this.socket.on(e,t.bind(this)),this}onConnected(e){N.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){N.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){this.socket.emit(re,e)}onError(e){N.error("[SOCKET_ERROR]",e)}enqueue(e,t){N.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){N.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach((e=>{this.emit(e.action,e.payload)}))}emit(e,t){return this.requiresAuth&&!this.authenticated?this.enqueue(e,t):this.connected?void this.socket.emit(e,t):this.enqueue(e,t)}}{constructor(){super(),this.on("error",this.onError).on("carBid",this.addBid).on("success",this.popSuccess)}onError(e){H.toast(e.message,"error")}addBid(e){R.bids.unshift(e)}popSuccess(e){H.toast(e.message,"success")}},ue=P({domain:"demodays.us.auth0.com",clientId:"sPPms5w1gGrBv5T6hY9vj1xZWwT7HoCj",audience:"https://student-auth.com",useRefreshTokens:!0,onRedirectCallback:e=>{se.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});async function de(e){if(!ue.isAuthenticated)return e;const t=1e3*ue.identity.exp,a=t<Date.now(),o=t<Date.now()+432e5;return a?await ue.loginWithPopup():o&&(await ue.getTokenSilently(),Y.defaults.headers.authorization=ue.bearer,ie.authenticate(ue.bearer)),e}ue.on(ue.AUTH_EVENTS.AUTHENTICATED,(async function(){Y.defaults.headers.authorization=ue.bearer,Y.interceptors.request.use(de),R.user=ue.user,await J.getAccount(),ie.authenticate(ue.bearer)}));const pe={setup:()=>({account:c((()=>R.account)),async login(){ue.loginWithRedirect()},async logout(){await H.confirm("Are you sure you want to logout","","warning")&&ue.logout({returnTo:window.location.origin})}})},me={class:"text-white py-4"},ge={key:0,class:"clip-text d-flex justify-content-between"},be={class:"dropdown-menu","aria-labelledby":"account-dropdown"},he=T(" Account Settings "),fe=T(" Your Listings "),ve=u("i",{class:"mdi mdi-power f-20"},null,-1),ye={key:1},_e=u("b",null," Login ",-1);pe.render=function(e,t,a,o,s,n){const r=d("router-link");return l(),i("div",me,[o.account.id?(l(),i("div",ge,[u("img",{src:o.account.picture,alt:"",class:"rounded selectable",height:"45","data-bs-toggle":"dropdown","aria-expanded":"false",id:"account-dropdown"},null,8,["src"]),u("ul",be,[u("li",null,[u(r,{class:"dropdown-item",to:{name:"Account.Settings",params:{accountId:o.account.id}}},{default:S((()=>[he])),_:1},8,["to"])]),u("li",null,[u(r,{class:"dropdown-item",to:{name:"Account.Listings",params:{accountId:o.account.id}}},{default:S((()=>[fe])),_:1},8,["to"])])]),u("button",{class:"btn selectable text-danger lighten-30",onClick:t[1]||(t[1]=(...e)=>o.logout&&o.logout(...e)),title:"Logout"},[ve])])):(l(),i("div",ye,[u("button",{class:"btn selectable text-success lighten-30",onClick:t[2]||(t[2]=(...e)=>o.login&&o.login(...e))},[_e])]))])};var we=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:pe});class Ae{constructor(e={}){this.id=e.id,this.make=e.make,this.model=e.model,this.year=e.year,this.description=e.description,this.price=e.price,this.img=e.img,this.creatorId=e.creatorId,this.creator=e.creator||{}}}const ke={props:{car:{type:Ae,required:!0}},setup:e=>({deleteCar(){N.log("working?")}})},Ce={class:"listing"},xe={class:"card selectable text-dark"},Ee={class:"position-relative w-100"},Pe={class:"gradient"},Se={class:"position-absolute clip-text",style:{bottom:"1rem",left:"1rem","z-index":"1"}},Te={class:"text-white f-20"};ke.render=function(e,t,a,o,s,n){const r=d("router-link");return l(),i("div",Ce,[u(r,{to:{name:"Car",params:{carId:a.car.id}},title:a.car.make},{default:S((()=>[u("div",xe,[u("div",Ee,[u("div",Pe,[u("div",Se,[u("b",Te,O(a.car.year)+" "+O(a.car.make)+" "+O(a.car.model),1)]),u("img",{src:a.car.img,alt:"listing image",class:"rounded w-100"},null,8,["src"])])])])])),_:1},8,["to","title"])])};var Oe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ke});const je=new class{async getCars(e=""){R.cars=[];const t=await Y.get("api/cars"+e);R.cars=t.data.map((e=>new Ae(e)))}async getCarBids(e){const t=await Y.get(`api/cars/${e}/bids`);N.log("the res",t.data),R.bids=t.data}async getCarById(e){R.car=null;const t=await Y.get(`api/cars/${e}`);R.car=new Ae(t.data),ie.emit("JOIN_CAR_ROOM",e),this.getCarBids(e)}async createCar(e){const t=await Y.post("api/cars",e);R.cars.push(new Ae(t.data))}async createBid(e,t){await Y.post(`api/cars/${e}/bids`,t)}async editCar(e){const t=await Y.put(`api/cars/${e.id}`,e);R.car=new Ae(t.data)}async removeCar(e){await Y.delete(`api/cars/${e}`),R.car=null,R.cars.filter((t=>t.id!==e))}};const Ie={props:{car:{type:Ae,required:!0}},setup(e){const t=h({});return{editable:t,async createBid(){try{await je.createBid(e.car.id,t.value)}catch(a){H.toast(a.message,"error")}}}}},Le=w("data-v-b36b04fa");g("data-v-b36b04fa");const Be={class:"d-flex align-items-center"},Re=u("label",{for:"bid",class:"sr-only"},null,-1),Ve=u("button",{type:"submit",class:"btn btn-success square-left"}," Bid ",-1);b();const qe=Le(((e,t,a,o,s,n)=>(l(),i("form",{class:"carbid-form",onSubmit:t[2]||(t[2]=_(((...e)=>o.createBid&&o.createBid(...e)),["prevent"]))},[u("div",Be,[Re,v(u("input",{type:"text",class:"form-control square-right",placeholder:"$100",name:"bid","onUpdate:modelValue":t[1]||(t[1]=e=>o.editable.bid=e)},null,512),[[y,o.editable.bid]]),Ve])],32))));Ie.render=qe,Ie.__scopeId="data-v-b36b04fa";var Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});const De={props:{car:{type:Ae,default:()=>new Ae}},setup(e){const t=h({});return f((()=>{t.value=n({},e.car)})),{editable:t,async handleSubmit(){try{t.value.id?await je.editCar(t.value):(await je.createCar(t.value),t.value={});j.getInstance(document.getElementById("edit-modal")).hide()}catch(e){H.toast(e.message,"error")}}}}},He={class:"form-group"},$e=u("label",{for:"make",class:""},"Make:",-1),Me=u("option",{disabled:"",selected:"",value:""}," Please Choose your car make ",-1),ze=u("option",null,"honda",-1),Ne=u("option",null,"hyundai",-1),Ye=u("option",null,"tesla",-1),Je=u("option",null,"toyota",-1),We=u("option",null,"other",-1),Ke={class:"form-group"},Fe=u("label",{for:"model",class:""},"Model:",-1),Ge={class:"form-group"},Qe=u("label",{for:"price",class:""},"Price:",-1),Ze={class:"form-group"},Xe=u("label",{for:"year",class:""},"year:",-1),et={class:"form-group"},tt=u("label",{for:"description",class:""},"description:",-1),at={class:"form-group"},ot=u("label",{for:"img",class:""},"img:",-1),st=u("div",{class:"d-flex justify-content-between my-3"},[u("button",{type:"button","data-bs-dismiss":"modal","aria-label":"Close",class:"btn text-dark lighten-20 text-uppercase selectable"},[u("b",null," cancel ")]),u("button",{type:"submit",class:"btn text-primary text-uppercase selectable"},[u("b",null," submit ")])],-1);De.render=function(e,t,a,o,s,n){return l(),i("form",{onSubmit:t[7]||(t[7]=_(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[u("div",He,[$e,v(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.editable.make=e),name:"make",id:"make",required:"",class:"form-control"},[Me,ze,Ne,Ye,Je,We],512),[[I,o.editable.make]])]),u("div",Ke,[Fe,v(u("input",{placeholder:"Model","onUpdate:modelValue":t[2]||(t[2]=e=>o.editable.model=e),type:"text",class:"form-control",name:"model",id:"model",required:""},null,512),[[y,o.editable.model]])]),u("div",Ge,[Qe,v(u("input",{placeholder:"Price","onUpdate:modelValue":t[3]||(t[3]=e=>o.editable.price=e),type:"number",class:"form-control",name:"price",id:"price",min:"0",max:"9999999"},null,512),[[y,o.editable.price]])]),u("div",Ze,[Xe,v(u("input",{placeholder:"year","onUpdate:modelValue":t[4]||(t[4]=e=>o.editable.year=e),type:"year",class:"form-control",name:"year",id:"year"},null,512),[[y,o.editable.year]])]),u("div",et,[tt,v(u("textarea",{placeholder:"Description","onUpdate:modelValue":t[5]||(t[5]=e=>o.editable.description=e),type:"text",class:"form-control",name:"description",id:"description",rows:"5"},null,512),[[y,o.editable.description]])]),u("div",at,[ot,v(u("input",{placeholder:"https://imgurl.com","onUpdate:modelValue":t[6]||(t[6]=e=>o.editable.img=e),type:"url",class:"form-control",name:"img",id:"img",required:""},null,512),[[y,o.editable.img]])]),st],32)};var nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:De});const rt={},ct={class:"modal",tabindex:"-1"},lt={class:"modal-dialog"},it={class:"modal-content"},ut={class:"modal-header"},dt={class:"modal-title"},pt=u("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),mt={class:"modal-body"};rt.render=function(e,t){return l(),i("div",ct,[u("div",lt,[u("div",it,[u("div",ut,[u("h5",dt,[L(e.$slots,"modal-title")]),pt]),u("div",mt,[L(e.$slots,"modal-body")])])])])};var gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:rt});const bt={setup:()=>({state:r({dropOpen:!1}),user:c((()=>R.user)),async login(){ue.loginWithPopup()},async logout(){ue.logout({returnTo:window.location.origin})}})},ht=w("data-v-7d8c99a8");g("data-v-7d8c99a8");const ft={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},vt=u("div",{class:"d-flex flex-column align-items-center"},[u("img",{alt:"logo",src:"/assets/cw-logo.71baeadb.png",height:"45"})],-1),yt=u("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[u("span",{class:"navbar-toggler-icon"})],-1),_t={class:"collapse navbar-collapse",id:"navbarText"},wt=u("ul",{class:"navbar-nav me-auto"},null,-1),At={class:"navbar-text"},kt={key:1,class:"dropdown"},Ct={class:"mx-3"},xt=u("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);b();const Et=ht(((e,t,a,o,s,n)=>{const r=d("router-link");return l(),i("nav",ft,[u(r,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:ht((()=>[vt])),_:1}),yt,u("div",_t,[wt,u("span",At,[o.user.isAuthenticated?(l(),i("div",kt,[u("div",{class:"dropdown-toggle",onClick:t[2]||(t[2]=e=>o.state.dropOpen=!o.state.dropOpen)},[u("img",{src:o.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),u("span",Ct,O(o.user.name),1)]),u("div",{class:["dropdown-menu p-0 list-group w-100",{show:o.state.dropOpen}],onClick:t[4]||(t[4]=e=>o.state.dropOpen=!1)},[u(r,{to:{name:"Account"}},{default:ht((()=>[xt])),_:1}),u("div",{class:"list-group-item list-group-item-action hoverable",onClick:t[3]||(t[3]=(...e)=>o.logout&&o.logout(...e))}," logout ")],2)])):(l(),i("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase",onClick:t[1]||(t[1]=(...e)=>o.login&&o.login(...e))}," Login "))])])])}));bt.render=Et,bt.__scopeId="data-v-7d8c99a8";var Pt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:bt});const St={},Tt={class:"sidebar d-md-flex flex-column justify-content-between bg-dark d-none d-md-block"},Ot={class:"top-part"},jt=u("div",{class:"text-white py-3"},[u("h3",{class:""}," Gregslist ")],-1),It={class:"links"},Lt={class:"nav-links ps-0"},Bt={class:"nav-link"},Rt=T(" About "),Vt={class:"nav-link"},qt=T(" Cars "),Ut={class:"nav-link"},Dt=T(" Houses "),Ht={class:"nav-link"},$t=T(" Jobs "),Mt={class:"bottom-part"};St.render=function(e,t,a,o,s,n){const r=d("router-link"),c=d("Auth");return l(),i("div",Tt,[u("div",Ot,[jt,u("div",It,[u("ul",Lt,[u("li",Bt,[u(r,{class:"selectable rounded p-2 text-success lighten-30",to:{name:"About"}},{default:S((()=>[Rt])),_:1})]),u("li",Vt,[u(r,{class:"selectable rounded p-2 text-success lighten-30",to:{name:"Cars"}},{default:S((()=>[qt])),_:1})]),u("li",Ut,[u(r,{class:"selectable rounded p-2 text-success lighten-30",to:{name:"Houses"}},{default:S((()=>[Dt])),_:1})]),u("li",Ht,[u(r,{class:"selectable rounded p-2 text-success lighten-30",to:{name:"Jobs"}},{default:S((()=>[$t])),_:1})])])])]),u("div",Mt,[u(c)])])};var zt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:St});const Nt=B(V);!function(e){const t={"./components/AccountForm.vue":Z,"./components/Auth.vue":we,"./components/Car.vue":Oe,"./components/CarBidForm.vue":Ue,"./components/CarForm.vue":nt,"./components/Modal.vue":gt,"./components/Navbar.vue":Pt,"./components/Sidebar.vue":zt};Object.entries(t).forEach((([t,a])=>{const o=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(o,a.default)}))}(Nt),Nt.use(se).mount("#app");export{R as A,H as P,je as c,se as r};
